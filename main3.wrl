#VRML V2.0 utf8

Background {
  groundColor [ 0 0 0 ]
  skyAngle [ 1.309 1.571 ]
  skyColor [ 0 0.2 0.7 0 0.5 1 0.59       0.27      0.08]
}


DEF BACKGROUND Transform {
    translation 0 -200 -500
    children Shape {
        geometry Box{
            size 2000 1000 1
        }
        appearance Appearance {
             texture ImageTexture {
                url "model/sunsetbackground.jpeg"
                repeatS TRUE
                repeatT TRUE
            }      
        }
    }
}


DEF Camera_Rot Transform {
  rotation 0 1 0 0
  children [
    DEF Camera_Transl Transform {
      translation 0 0 0
      children [
        DEF Camera_001 Viewpoint {
          position 220 15 150
          orientation 0 1 0 -0.3
        }
        Transform{
                  translation 0 0 0
                  children[
                            DEF mountainView Transform {
                                children [
                                    Inline {
                                        url [  "model/MountainStraight.wrl" ]
                                    }
                                ]
                            }
                            DEF lake Transform{
                                children[
                                    Inline{
                                        url [ "model/lake.wrl" ]
                                    }
                                ]
                            }   
                            Transform{
                                rotation 0 1 0 1.57 
                                scale 320 10 350
                                children[
                                    Inline{
                                        url ["model/GROUND.wrl"]
                                    }
                                ]     
                            }    
                            Transform{
                                translation 0 0 100
                                scale 6.5 5 5
                                children Inline{
                                    url "model/tracks.wrl"
                                }
                            }
                        

                            Transform{
                                translation 20 -10 -80
                                rotation 0 1 0 1.57
                                scale 20 20 20
                                
                                children[ 
                                    USE mountainView
                                ]
                            }

                            Transform{
                                translation 500 1 250
                                scale 0.8 0.2 0.8
                                children[ USE lake]
                            }
                            Transform{
                                translation 100 0.2 -70
                                scale 5 3 5
                                children[ 
                                    Inline{ url ["model/forest2.wrl"] }
                                ]
                            }

                            Transform{
                                translation -300 20 -50
                                # rotation 0 0 0 0
                                scale 6 15 6
                                children[
                                    Inline{ url["model/vrml-windmill/windmill-animation.wrl"] }
                                ]
                            } 
                            DEF FULLTRAIN Transform{
                                translation 265 8.4 100
                                children[
                                    Transform{
                                        children Inline{
                                            url "model/Engine.wrl"
                                        }
                                    }
                                    Transform{
                                        translation 133 0.1 0
                                        scale 1.9 2 2
                                        children Inline{
                                            url "model/wagon.wrl"
                                        }
                                    }
                                ]
                            }                  
                        ]

                
              }
      ]
    }
  ]
}
#  DEF pi_cam PositionInterpolator { 
#                key [ 0 0.4 0.5 0.8 1 ] 
#                keyValue [0 0 10, -5 40 0, 10 55 0 , 5 40 0 , 10 2 0] 
# } 

DEF touchBox TouchSensor {}

DEF timer TimeSensor {
    startTime -1
    stopTime 0
	cycleInterval 60

	loop TRUE
	enabled TRUE
}


DEF MOVE_View  PositionInterpolator{
    key [0 0.5]
    keyValue [220 15 150 ,-400 15 150]
}

DEF SKY PositionInterpolator {
    key [ 0 1]
    keyValue [0 -200 -500, 0 500 -500]
}

DEF TRAIN PositionInterpolator {
    key [0 0 0.5]
    keyValue [0 8.4 100,0 8.4 100]
}

ROUTE touchBox.touchTime TO timer.startTime
ROUTE timer.fraction_changed TO SKY.set_fraction
# ROUTE timer.fraction_changed TO MOVE_View.set_fraction
ROUTE timer.fraction_changed TO TRAIN.set_fraction
# ROUTE timer.fraction_changed TO engine1.set_fraction
ROUTE SKY.value_changed TO BACKGROUND.set_translation
# ROUTE MOVE_View.value_changed TO Camera_001.set_position
# ROUTE MOVE.value_changed TO Camera_Transl.set_translation
ROUTE TRAIN.value_changed TO FULLTRAIN.set_translation
# ROUTE si.value_changed TO pi.set_fraction
# ROUTE scene1.value_changed TO BACKGROUNDSCENE1.set_translation
# ROUTE engine1.value_changed TO MYTRAIN.set_translation